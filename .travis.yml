cache:
  apt: true

matrix: 
   include: 
#     - os: linux
#       language: cpp
#       compiler: gcc
     - os: osx
       osx_image: xcode7.1
       language: cpp
       compiler: clang++

addons: 
   apt: 
    sources: 
      - kalakris-cmake 
      - boost-latest 
      - kubuntu-backports 
    packages: 
      - cmake 
      - libgtest-dev 
      - doxygen-latex 
      - libusb-1.0-0-dev 

cache: 
  directories: 
  - $HOME/flann 
  - $HOME/vtk 
  - $HOME/qhull 
  - $HOME/doxygen 

# http://dl.google.com/android/repository/android-ndk-r11c-windows-x86.zip
# http://dl.google.com/android/repository/android-ndk-r11c-windows-x86_64.zip
# wget http://dl.google.com/android/ndk/android-ndk-r8c-darwin-x86.tar.bz2
# tar -jxvf android-ndk-r8c-darwin-x86.tar.bz2
# cd android-ndk-r8c
# CMake Update(NG)
# sudo apt-get install software-properties-common;
# sudo add-apt-repository ppa:george-edison55/cmake-3.x;
# sudo apt-get update;
# travis_wait 45 sudo apt-get install cmake;
# cmake --version;
# if [ "$CXX" = "clang++" ]; then export CXXFLAGS="-std=c++11 -arch armv7s -isysroot /Applications/Xcode6-Beta6.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS8.0.sdk";
# if [ "$CXX" = "clang++" ]; then export CXX="clang++-3.7" CC="clang-3.7";
# export IOS_PLATFORM_LOCATION="OS";
# export CXXFLAGS="-std=c++11 -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS9.1.sdk";
# if ng
# cmake -DBUILD_ANDROID:BOOL=OFF -DBUILD_IOS_DEVICE:BOOL=ON -BUILD_IOS_SIMULATOR:BOOL=OFF ../;
# Travis CI osx image?
# https://docs.travis-ci.com/user/osx-ci-environment/
# 
before_install:
  - if [[ $TRAVIS_OS_NAME = "osx" ]]; then
      brew update >/dev/null;

      export IOS_PLATFORM_LOCATION="OS";
      export CXXFLAGS="-std=c++11 -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS9.1.sdk";

      brew outdated cmake || brew upgrade cmake;

      cd ..;
      mkdir build;
      cd build;
      cmake ../ -DBUILD_ANDROID:BOOL="OFF" -DBUILD_IOS_DEVICE:BOOL="ON" -BUILD_IOS_SIMULATOR:BOOL="OFF";
    fi

  - if [[ $TRAVIS_OS_NAME = "linux" ]]; then
      sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test;
      sudo apt-get -qq update;
      sudo apt-get -qq install g++-4.9 -y;
      wget --no-check-certificate -qO- http://www.cmake.org/files/v3.4/cmake-3.4.1-Linux-x86_64.tar.gz -O /tmp/cmake-3.4.1-Linux-x86_64.tar.gz;
      tar -xvf /tmp/cmake-3.4.1-Linux-x86_64.tar.gz;
      export PATH=$PWD/cmake-3.4.1-Linux-x86_64/bin/:$PATH;

      wget http://dl.google.com/android/repository/android-ndk-r11c-linux-x86_64.zip;
      unzip -q android-ndk-r11c-linux-x86_64.zip;
      cd android-ndk-r11c;
      export ANDROID_NDK=$PWD;

      cd ..;
      mkdir build;
      cd build;
      cmake ../;
    fi


install:
    - travis_wait 60 make

